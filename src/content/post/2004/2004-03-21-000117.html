---
layout: post
title: "校园网和adsl二合一"
category: "Tech"
tags: []
description: "前面介绍过了如何利用Adsl猫的路由实现多台机器同时上网具体见利用ADSL猫的路由功能实现多台机器同时上网（基础篇）。 现在我们利用校园网的硬件资源来实现免拖线和换线我们只要把Adsl猫接到一个闲置的校园网的端口上其他机器也接到自己的校园网端口上，网段和猫在同一网段，子网掩码相同网关是猫的ip，为了不和其他机器ip冲突..."
publishDate: "2004-03-21 14:19:57"
---


<P>　　前面介绍过了如何利用Adsl猫的路由实现多台机器同时上网具体见<A href="http://blog.xdanger.com/archives/2004/03/21/000116.html">利用ADSL猫的路由功能实现多台机器同时上网（基础篇）</A>。</P>
<P>　　现在我们利用校园网的硬件资源来实现免拖线和换线我们只要把Adsl猫接到一个闲置的校园网的端口上其他机器也接到自己的校园网端口上，网段和猫在同一网段，子网掩码相同网关是猫的ip，为了不和其他机器ip冲突，请改到一个觉得不会发生冲突的网段。<BR>还有一点注意，adsl和机器网卡相连的是交叉线，adsl和校园网端口连的是直通线。<BR>这样就可以校园网和adsl切换不用换线了，而且不要拖线了。</P>
<P>　　下面我介绍一个win2000和winxp下一个脚本执行命令，netsh。利用这个命令可以<BR>实现校园网和adsl的自动切换。格式如下：</P>
<DIV class=code>netsh&nbsp;interface&nbsp;ip&nbsp;set&nbsp;address&nbsp;name="用于连接网卡的名称(如本地连接)"&nbsp;source=static&nbsp;&nbsp;你的ip&nbsp;你的子网掩码&nbsp;你的网关&nbsp;默认网关的跃点数一般为1</DIV>
<P>例如我网卡连接名称叫本地连结,ip:192.168.1.2&nbsp;子网掩码:255.255.255.0&nbsp;网关:192.168.1.1则命令如下：</P>
<DIV class=code>netsh&nbsp;interface&nbsp;ip&nbsp;set&nbsp;address&nbsp;name="本地连接"&nbsp;source=static&nbsp;192.168.1.2&nbsp;255.255.255.0&nbsp;192.168.1.1&nbsp;1</DIV>
<P>注意中间的空格</P>
<P>　　校园网的配置也一样，把上面的一段存为批处理文件，使用时只要双击即可。</P>
<br /><br />


