---
title: "ADSL 路由方式实现自动拨号 彻底方便校园网使用 ADSL"
tags: ["tech", "networking", "adsl", "router", "campus network", "diy", "tutorial", "internet", "lan", "ip configuration"]
description: "详细教程讲解如何在校园网环境下设置 ADSL Modem 的路由模式，实现多台电脑共享一条 ADSL 线路且无需主机开机，包括 IP 配置、Modem 设置和编写切换批处理文件等步骤，解决了传统 Hub 方式的多种局限和不便。"
publishDate: "2003-12-31 17:58:24"
---

我平时住校，虽说有校园网，但上大的校园网，多数情况下时候网络相应速度实在那个……由于工作的需要，还是毅然装了 ADSL，虽说是校园版 ADSL，每个月 80RMB 帐单来的时候还是非常头痛的，于是决定让兄弟们一起扛——大家一起用。

于是想都没想，楼下教育超市就背了个 Hub 和一大坨网线再买了块网卡，我做主机，这样连起来用了几个月。

时间长了之后发现很麻烦：

- 每天最早开机最晚关机不要说，一大早就被吵醒（大学里总有 N 个网游狂男子），而且绝对不能随意重起，实在必要要事先跑一圈打招呼，否则万一人家穿着一身能卖￥Xxxx.00 的装备在 PvP……-.-b
- 楼面里不止我一个装，每个 Hub 拖 8 台机器，所以走廊里网线就是蜘蛛网，管理员阿姨简直痛恨死了。:-)
- 校园网内部是 100MbBit/s 级的，我买的 120RMB 的 Hub 只有 10MbBit/s，互相之间传东西只有校园网的 1/10。
- 要切换 ADSL 与校园网及不方便，我根本不能换不去说，其他人也要拔线插线改 IP……校园网内还是有很多 FTP 的，总不能放着高速局域网不去利用。

经过几天的试验，今天终于将所有问题都解决了！不设主机，ADSL 的 Modem 开启路由，只要通电就自动拨号；省去一块 Hub 一块网卡一根网线，各自只要将网线插在自己台子地下的校园接口即可；理论上最多能拖 254 台 PC；使用校园网线路，速度 100MbBit/s；自编批处理文件双击即可转换 ADSL/校园网！我的 ADSL Modem 为南京斯威特新技术创新有限公司生产，型号为 SLA800D。以下步骤均仅限于此型号的 Modem，其他型号的设备的参数可能不同，大体思路是一致的。

1. 向当地宽带服务提供商那里查询 VPI/VCI 值。上海地区是 0/32。
2. 设置 IP。
   本机 IP：192.168.1.xxx（只要不是 192.168.1.1 就行，因为这个 IP 要给 ADSL 用）。
   子网掩码：255.255.255.0
   默认网关：192.168.1.1（这就是 ADSL Modem 默认的 IP 地址）
3. 打开浏览器，在地址栏输入：`http://192.168.1.1`，回车。
   用户名：**root**
   密 码：**12345**（这是 Modem 默认的用户名和密码，进入后可修改密码。）
   点确定后进入管理页面。
4. 点击左边导航栏的"WAN 设置"，将"当前 ATM PVC 列表"下所有的项目全部删除。然后[如图](http://blog.xdanger.com/archives/pics/20031231a.png)添加一项设置，保存。
5. 如果有必要，可修改 Modem 的 LAN IP 地址为一个 192.168.xxx.xxx 的特殊数字串，这样可有效防止校园网内不认识的人无意间用到这个 IP 地址作为网关，而占用自己的带宽。点击导航栏的"LAN 设置"即可修改。
6. 点击导航栏的"保存&重启"。先保存，然后重起。注意页面上的提示语句。这样 Modem 就设置完毕了。
7. 用网线将 Modem 接在校园网的任意一处接口，最好是 Modem 自带的三星线，据 ADSL 客服说这样稳定，事实上五星线我根本没法用，接上去没信号，搞不懂为什么。其他机器只要像往常一样插在校园网接口就行。
8. 逐台设置 PC 机的 IP，保证不要冲突，最好子网掩码设成 255.255.255.0 并且前三段要和第 5 步中设置的 Modem 的 Lan IP 一致，网关就是 Modem 的 Lan IP 地址。到这一步基本可以完成了，只是校园网和 ADSL 切换起来还要手动换 IP。
9. 编写 2 个批处理文件，方便转换 IP。此处举例一个为 ADSL.bat，另一个为 campus.bat；分别用来转换成 ADSL 的 IP 和校园网 IP。
   ADSL.bat 内容如下：

   ```bat
   netsh interface ip set address name="网络连接里的连接名称，如 本地连接" static PC 分配到的 ADSL 的 IP 地址，如 192.168.1.2 255.255.255.0 Modem 的 Lan IP 地址，如 192.168.1.1 1
   ```

   campus.bat 内容如下：

   ```bat
   netsh interface ip set address name="网络连接里的连接名称，如 本地连接" static PC 分配到的校园网的 IP 地址，如 10.126.12.29 255.255.255.0 校园网的网关 IP 地址，如 10.126.12.254 1
   ```

   放到桌面上吧，双击即可轻松转换所在网络，随心所欲，呵呵。
